

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Queue System Concepts &mdash; Sigma2/Metacenter documentation  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Sigma2/Metacenter documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">News</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://opslog.sigma2.no">Latest changes and events</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.sigma2.no/hardware-status">Hardware live status</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/support_line.html">Support line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/how_to_write_good_support_requests.html">Writing good support requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/qa-sessions.html">Open Question &amp; Answer Sessions for All Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/lost_forgotten_password.html">Lost or expiring password</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/project_leader_support.html">Project leader support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/advanced_user_support.html">Advanced User Support (AUS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/publish_research_data.html">Publish Research Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/course_resources.html">CRaaS - Course Resources as a Service</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../frontpage.html">The Norwegian Academic HPC Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/applying_account.html">How do I get an HPC account?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/applying_resources.html">Applying for computing and storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/training.html">Training material</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/create_ssh_keys.html">SSH</a></li>
</ul>
<p class="caption"><span class="caption-text">HPC Machines</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/hardware_overview.html">Overview over our machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/betzy.html">Betzy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/fram.html">Fram</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/saga.html">Saga</a></li>
<li class="toctree-l1"><a class="reference external" href="https://hpc-uit.readthedocs.io">Stallo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/migration2metacenter.html">Migration to a Metacenter HPC machine</a></li>
</ul>
<p class="caption"><span class="caption-text">Software</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../software/modulescheme.html">Software Module Scheme</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/installed_software.html">Installed Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/containers.html">Running Singularity and Docker containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/appguides.html">Application guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/userinstallsw.html">How can I, as a user, install software for myself or my project with EasyBuild?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/userinstallsw.html#how-can-i-as-user-install-python-packages">How can I as user install Python packages?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/licenses.html">Licenses and access policies</a></li>
</ul>
<p class="caption"><span class="caption-text">Jobs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../submitting.html">Submitting jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../choosing_job_types.html">Job Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../job_scripts.html">Job Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running-scientific-software.html">Running scientific software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../monitoring.html">Monitoring jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../choosing_memory_settings.html">How to choose the right amount of memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common_job_failures.html">Common job failures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance.html">How to check the performance and scaling using Arm Performance Reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interactive_jobs.html">Interactive jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects_accounting.html">Projects and accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network-access.html">No network access on compute nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dos_and_donts.html">Dos and Don’ts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides.html">Guides</a></li>
</ul>
<p class="caption"><span class="caption-text">Files and Storage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/nird.html">NIRD - National Infrastructure for Research Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/clusters.html">Storage areas on HPC clusters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/backup.html">Backup on Betzy, Fram, Saga, and NIRD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/sharing_files.html">Data handling and storage policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/file_transfer.html">File transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/performance.html">Storage performance tuning</a></li>
</ul>
<p class="caption"><span class="caption-text">Code Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../code_development/building.html">Building scientific software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code_development/compilers.html">Compilers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code_development/performance.html">Performance Analysis and Tuning</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Sigma2/Metacenter documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Queue System Concepts</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/UNINETTSigma2/documentation/blob/master/jobs/submitting/queue_system_concepts.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="queue-system-concepts">
<h1>Queue System Concepts<a class="headerlink" href="#queue-system-concepts" title="Permalink to this headline">¶</a></h1>
<p>This page explains some of the core concepts of the Slurm queue system.</p>
<p>For an overview of the Slurm concepts, Slurm has a beginners guide:
<a class="reference external" href="https://slurm.schedmd.com/quickstart.html">Quick Start</a>.</p>
<div class="section" id="partition">
<h2>Partition<a class="headerlink" href="#partition" title="Permalink to this headline">¶</a></h2>
<p>The nodes on a cluster is divided into sets, called <em>partitions</em>.  The
partitions can be overlapping.</p>
<p>Several <a class="reference internal" href="../choosing_job_types.html"><span class="doc std std-doc">job types</span></a> on our clusters are
implemented as partitions, meaning that one specifies <code class="docutils literal notranslate"><span class="pre">--partition</span></code> to
select job type – for instance <em>bigmem</em>, <em>accel</em> and <em>optimist</em>.</p>
</div>
<div class="section" id="qos-quality-of-service">
<h2>QoS - Quality of Service<a class="headerlink" href="#qos-quality-of-service" title="Permalink to this headline">¶</a></h2>
<p>A <em>QoS</em> is a way to assign properties and limitations to jobs.  It can
be used to give jobs different priority, and add or change the
limitations on the jobs, for instance the size or lenght of jobs, or
the number of jobs running at one time.</p>
<p>Several <a class="reference internal" href="../choosing_job_types.html"><span class="doc std std-doc">job types</span></a> on our clusters are
implemented as a QoS, meaning that one specifies <code class="docutils literal notranslate"><span class="pre">--qos</span></code> to select
job type – for instance <em>preproc</em>, <em>devel</em> and <em>short</em>.
The jobs will then (by default) run in the standard (<em>normal</em>) partition,
but have different properties.</p>
</div>
<div class="section" id="account">
<h2>Account<a class="headerlink" href="#account" title="Permalink to this headline">¶</a></h2>
<p>An <em>account</em> is an entity that can be assigned a quota for resource
usage.  All jobs run in an account, and the job’s usage is subtracted
from the account’s quota.</p>
<p>Accounts can also have restrictions, like how man jobs can run in it
at the same time, or which reservations its jobs can use.</p>
<p>On our cluster, each project has its own account, with the same name
“nnXXXXk”.  Some projects also have an account “nnXXXXo” for running
<em>optimist</em> jobs.  We use accounts mainly for accounting resource
usage.</p>
<p>Read more about <a class="reference internal" href="../projects_accounting.html"><span class="doc std std-doc">projects and usage accounting</span></a>.</p>
</div>
<div class="section" id="jobs">
<h2>Jobs<a class="headerlink" href="#jobs" title="Permalink to this headline">¶</a></h2>
<p>Jobs are submitted to the job queue, and starts running on assigned
compute nodes when there are enough resources available.</p>
<div class="section" id="job-step">
<h3>Job step<a class="headerlink" href="#job-step" title="Permalink to this headline">¶</a></h3>
<p>A job is divided into one or more <em>job steps</em>.  Each time a job runs
<code class="docutils literal notranslate"><span class="pre">srun</span></code> or <code class="docutils literal notranslate"><span class="pre">mpirun</span></code>, a new job step is created.  Job steps are
<a class="reference internal" href="../guides/running_job_steps_parallel.html"><span class="doc std std-doc">normally</span></a> executed
sequentially, one after each other.  In addition to these, the
batch job script itself, which runs on the first of the allocated
nodes, is considered a job step (<code class="docutils literal notranslate"><span class="pre">batch</span></code>).</p>
<p><code class="docutils literal notranslate"><span class="pre">sacct</span></code> will show the job steps.  For instance:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sacct -j 357055
	   JobID    JobName  Partition    Account  AllocCPUS      State ExitCode
------------ ---------- ---------- ---------- ---------- ---------- --------
357055              DFT     normal    nn9180k        256  COMPLETED      0:0
357055.batch      batch               nn9180k         32  COMPLETED      0:0
357055.exte+     extern               nn9180k        256  COMPLETED      0:0
357055.0      pmi_proxy               nn9180k          8  COMPLETED      0:0
</pre></div>
</div>
<p>The first line here is the job allocation.  Then comes the job script
step (<code class="docutils literal notranslate"><span class="pre">batch</span></code>), and an artificial step that we can ignore here
(<code class="docutils literal notranslate"><span class="pre">extern</span></code>), and finally a job step corresponding to an <code class="docutils literal notranslate"><span class="pre">mpirun</span></code> or
<code class="docutils literal notranslate"><span class="pre">srun</span></code> (step 0).  Further steps would be numbered 1, 2, etc.</p>
</div>
<div class="section" id="tasks">
<h3>Tasks<a class="headerlink" href="#tasks" title="Permalink to this headline">¶</a></h3>
<p>Each job step starts one or more <em>tasks</em>, which corresponds to
processes.  So for instance the processes (mpi ranks) in an mpi job
step are tasks.  This is why one specifies <code class="docutils literal notranslate"><span class="pre">--ntasks</span></code> etc in job
scripts to select the number of processes to run in an mpi job.</p>
<p>Each task in a job step is started at the same time, and they run in
parallel on the nodes of the job.  <code class="docutils literal notranslate"><span class="pre">srun</span></code> and <code class="docutils literal notranslate"><span class="pre">mpirun</span></code> will take care
of starting the right number of processes on the right nodes.</p>
<p>(Unfortunately, Slurm also calls the individual instances of an <a class="reference internal" href="../job_scripts/array_jobs.html"><span class="doc std std-doc">array
job</span></a> for <em>array tasks</em>.)</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Sigma2/Metacenter

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>