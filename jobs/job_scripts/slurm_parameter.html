

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>SLURM Parameter and Settings &mdash; Sigma2/Metacenter documentation  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Sigma2/Metacenter documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">News</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://opslog.sigma2.no">Latest changes and events</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.sigma2.no/hardware-status">Hardware live status</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/support_line.html">Support line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/how_to_write_good_support_requests.html">Writing good support requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/qa-sessions.html">Open Question &amp; Answer Sessions for All Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/lost_forgotten_password.html">Lost or expiring password</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/project_leader_support.html">Project leader support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/advanced_user_support.html">Advanced User Support (AUS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/publish_research_data.html">Publish Research Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/course_resources.html">CRaaS - Course Resources as a Service</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../frontpage.html">The Norwegian Academic HPC Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/applying_account.html">How do I get an HPC account?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/applying_resources.html">Applying for computing and storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/training.html">Training material</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/create_ssh_keys.html">SSH</a></li>
</ul>
<p class="caption"><span class="caption-text">HPC Machines</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/hardware_overview.html">Overview over our machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/betzy.html">Betzy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/fram.html">Fram</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/saga.html">Saga</a></li>
<li class="toctree-l1"><a class="reference external" href="https://hpc-uit.readthedocs.io">Stallo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/migration2metacenter.html">Migration to a Metacenter HPC machine</a></li>
</ul>
<p class="caption"><span class="caption-text">Software</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../software/modulescheme.html">Software Module Scheme</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/installed_software.html">Installed Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/containers.html">Running Singularity and Docker containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/appguides.html">Application guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/userinstallsw.html">How can I, as a user, install software for myself or my project with EasyBuild?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/userinstallsw.html#how-can-i-as-user-install-python-packages">How can I as user install Python packages?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/licenses.html">Licenses and access policies</a></li>
</ul>
<p class="caption"><span class="caption-text">Jobs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../submitting.html">Submitting jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../choosing_job_types.html">Job Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../job_scripts.html">Job Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running-scientific-software.html">Running scientific software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../monitoring.html">Monitoring jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../choosing_memory_settings.html">How to choose the right amount of memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common_job_failures.html">Common job failures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance.html">How to check the performance and scaling using Arm Performance Reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interactive_jobs.html">Interactive jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects_accounting.html">Projects and accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network-access.html">No network access on compute nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dos_and_donts.html">Dos and Don’ts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides.html">Guides</a></li>
</ul>
<p class="caption"><span class="caption-text">Files and Storage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/nird.html">NIRD - National Infrastructure for Research Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/clusters.html">Storage areas on HPC clusters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/backup.html">Backup on Betzy, Fram, Saga, and NIRD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/sharing_files.html">Data handling and storage policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/file_transfer.html">File transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/performance.html">Storage performance tuning</a></li>
</ul>
<p class="caption"><span class="caption-text">Code Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../code_development/building.html">Building scientific software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code_development/compilers.html">Compilers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code_development/performance.html">Performance Analysis and Tuning</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Sigma2/Metacenter documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>SLURM Parameter and Settings</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/UNINETTSigma2/documentation/blob/master/jobs/job_scripts/slurm_parameter.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="slurm-parameter-and-settings">
<h1>SLURM Parameter and Settings<a class="headerlink" href="#slurm-parameter-and-settings" title="Permalink to this headline">¶</a></h1>
<p>SLURM supports a multitude of different parameters. This enables you to
effectively tailor your script to your need but also
means that is easy to get lost and waste your time and quota.</p>
<p>The following parameters can be used as command line parameters with
<code class="docutils literal notranslate"><span class="pre">sbatch</span></code> and <code class="docutils literal notranslate"><span class="pre">srun</span></code> or in jobscripts. To use it in a jobscript, start
a newline with <code class="docutils literal notranslate"><span class="pre">#SBATCH</span></code> followed by the parameter. Replace &lt;….&gt;
with the value you want, e.g. <code class="docutils literal notranslate"><span class="pre">--job-name=test-job</span></code>.</p>
<div class="section" id="slurm-parameter">
<h2>SLURM Parameter<a class="headerlink" href="#slurm-parameter" title="Permalink to this headline">¶</a></h2>
<div class="section" id="basic-settings">
<h3>Basic settings:<a class="headerlink" href="#basic-settings" title="Permalink to this headline">¶</a></h3>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--job-name=&lt;name&gt;</span></code></p></td>
<td><p>Job name to be displayed by for example <code class="docutils literal notranslate"><span class="pre">squeue</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--output=&lt;path&gt;</span></code></p></td>
<td><p>Path to the file where the job (error) output is written to</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--mail-type=&lt;type&gt;</span></code></p></td>
<td><p>Turn on mail notification; type can be one of BEGIN, END, FAIL, REQUEUE or ALL</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--mail-user=&lt;email_address&gt;</span></code></p></td>
<td><p>Email address to send notifications to</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="requesting-resources">
<h3>Requesting Resources<a class="headerlink" href="#requesting-resources" title="Permalink to this headline">¶</a></h3>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--time=&lt;d-hh:mm:ss&gt;</span></code></p></td>
<td><p>Time limit for job. Job will be killed by SLURM after time has run out. Format days-hours:minutes:seconds</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--nodes=&lt;num_nodes&gt;</span></code></p></td>
<td><p>Number of nodes. Multiple nodes are only useful for jobs with distributed-memory (e.g. MPI).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--mem=&lt;MB&gt;</span></code></p></td>
<td><p>Memory (RAM) per node. Number followed by unit prefix, e.g. 16G</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--mem-per-cpu=&lt;MB&gt;</span></code></p></td>
<td><p>Memory (RAM) per requested CPU core</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--ntasks-per-node=&lt;num_procs&gt;</span></code></p></td>
<td><p>Number of (MPI) processes per node. More than one useful only for MPI jobs. Maximum number depends nodes (number of cores)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--cpus-per-task=&lt;num_threads&gt;</span></code></p></td>
<td><p>CPU cores per task. For MPI use one. For parallelized applications benchmark this is the number of threads.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--exclusive</span></code></p></td>
<td><p>Job will not share nodes with other running jobs. You will be charged for the complete nodes even if you asked for less.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="accounting">
<h3>Accounting<a class="headerlink" href="#accounting" title="Permalink to this headline">¶</a></h3>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--account=&lt;name&gt;</span></code></p></td>
<td><p>Project (not user) account the job should be charged to.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--partition=&lt;name&gt;</span></code></p></td>
<td><p>Partition/queue in which to run the job.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--qos=&lt;devel/short&gt;</span></code></p></td>
<td><p>The <em>devel</em> or <em>short</em> QOS (quality of servive) can be used to submit short jobs for testing and debugging.</p></td>
</tr>
</tbody>
</table>
<p>See also <span class="xref myst">projects and accounting</span> for more information.</p>
<p>SLURM differs slightly from the previous Torque system with respect to
definitions of various parameters, and what was known as queues in
Torque may be covered by either <code class="docutils literal notranslate"><span class="pre">--partition=...</span></code> or <code class="docutils literal notranslate"><span class="pre">--qos=...</span></code>.</p>
<p>Check our cluster specific sites for an overview of the partitions and
QOS of that system:</p>
<ul class="simple">
<li><p><span class="xref myst">Fram</span></p></li>
<li><p><span class="xref myst">Saga</span></p></li>
</ul>
</div>
<div class="section" id="advanced-job-control">
<h3>Advanced Job Control<a class="headerlink" href="#advanced-job-control" title="Permalink to this headline">¶</a></h3>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--array=&lt;indexes&gt;</span></code></p></td>
<td><p>Submit a collection of similar jobs, e.g. <code class="docutils literal notranslate"><span class="pre">--array=1-10</span></code>. (sbatch command only). <a class="reference internal" href="array_jobs.html"><span class="doc std std-doc">More info</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--dependency=&lt;state:jobid&gt;</span></code></p></td>
<td><p>Wait with the start of the job until specified dependencies have been satified. E.g. –dependency=afterok:123456</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--ntasks-per-core=2</span></code></p></td>
<td><p>Enables hyperthreading. Only useful in special circumstances.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="differences-between-cpus-and-tasks">
<h2>Differences between CPUs and tasks<a class="headerlink" href="#differences-between-cpus-and-tasks" title="Permalink to this headline">¶</a></h2>
<p>As a new users writing your first SLURM job script the difference
between <code class="docutils literal notranslate"><span class="pre">--ntasks</span></code> and <code class="docutils literal notranslate"><span class="pre">--cpus-per-taks</span></code> is typically quite confusing.
Assuming you want to run your program on a single node with 16 cores
which SLURM parameters should you specify?</p>
<p>The answer is it depends whether the your application supports MPI. MPI
(message passing protocol) is a communication interface used for
developing parallel computing programs on distributed memory systems.
This is necessary for applications running on multiple computers (nodes)
to be able to share (intermediate) results.</p>
<p>To decide which set of parameters you should use, check if your
application utilizes MPI and therefore would benefit from running on
multiple nodes simultaneously. On the other hand you have an non-MPI
enables application or made a mistake in your setup, it doesn’t make
sense to request more than one node.</p>
</div>
<div class="section" id="settings-for-openmp-and-mpi-jobs">
<h2>Settings for OpenMP and MPI jobs<a class="headerlink" href="#settings-for-openmp-and-mpi-jobs" title="Permalink to this headline">¶</a></h2>
<div class="section" id="single-node-jobs">
<h3>Single node jobs<a class="headerlink" href="#single-node-jobs" title="Permalink to this headline">¶</a></h3>
<p>For applications that are not optimized for HPC (high performance
computing) systems like simple python or R scripts and a lot of software
which is optimized for desktop PCs.</p>
<div class="section" id="simple-applications-and-scripts">
<h4>Simple applications and scripts<a class="headerlink" href="#simple-applications-and-scripts" title="Permalink to this headline">¶</a></h4>
<p>Many simple tools and scripts are not parallized at all and therefore
won’t profit from more than one CPU core.</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--nodes=1</span></code></p></td>
<td><p>Start a unparallized job on only one node</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--ntasks-per-node=1</span></code></p></td>
<td><p>For OpenMP, only one task is necessary</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--cpus-per-task=1</span></code></p></td>
<td><p>Just one CPU core will be used.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--mem=&lt;MB&gt;</span></code></p></td>
<td><p>Memory (RAM) for the job. Number followed by unit prefix, e.g. 16G</p></td>
</tr>
</tbody>
</table>
<p>If you are unsure if your application can benefit from more cores try a
higher number and observe the load of your job. If it stays at
approximately one there is no need to ask for more than one.</p>
</div>
<div class="section" id="openmp-applications">
<h4>OpenMP applications<a class="headerlink" href="#openmp-applications" title="Permalink to this headline">¶</a></h4>
<p>OpenMP (Open Multi-Processing) is a multiprocessing library is often
used for programs on shared memory systems. Shared memory describes
systems which share the memory between all processing units (CPU cores),
so that each process can access all data on that system.</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--nodes=1</span></code></p></td>
<td><p>Start a parallel job for a shared memory system on only one node</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--ntasks-per-node=1</span></code></p></td>
<td><p>For OpenMP, only one task is necessary</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--cpus-per-task=&lt;num_threads&gt;</span></code></p></td>
<td><p>Number of threads (CPU cores) to use</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--mem=&lt;MB&gt;</span></code></p></td>
<td><p>Memory (RAM) for the job. Number followed by unit prefix, e.g. 16G</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="multiple-node-jobs-mpi">
<h3>Multiple node jobs (MPI)<a class="headerlink" href="#multiple-node-jobs-mpi" title="Permalink to this headline">¶</a></h3>
<p>For MPI applications.</p>
<p>Depending on the frequency and bandwidth demand of your setup, you can
either just start a number of MPI tasks or request whole nodes. While
using whole nodes guarantees that a low latency and high bandwidth it
usually results in a longer queuing time compared to cluster wide job.
With the latter the SLURM manager can distribute your task across all
nodes of stallo and utilize otherwise unused cores on nodes which for
example run a 16 core job on a 20 core node. This usually results in
shorter queuing times but slower inter-process connection speeds.</p>
<p>This will make the best use of the resources and give the most
predictable execution times. If your job requires more than the default
available memory per core (32 GB/node gives 2 GB/core for 16 core nodes
and 1.6GB/core for 20 core nodes) you should adjust this need with the
following command: <code class="docutils literal notranslate"><span class="pre">#SBATCH</span> <span class="pre">--mem-per-cpu=4GB</span></code> When doing this, the
batch system will automatically allocate 8 cores or less per node.</p>
<div class="section" id="to-use-whole-nodes">
<h4>To use whole nodes<a class="headerlink" href="#to-use-whole-nodes" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--nodes=&lt;num_nodes&gt;</span></code></p></td>
<td><p>Start a parallel job for a distributed memory system on several nodes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--ntasks-per-node=&lt;num_procs&gt;</span></code></p></td>
<td><p>Number of (MPI) processes per node. Maximum number depends on nodes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--cpus-per-task=1</span></code></p></td>
<td><p>Use one CPU core per task.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--exclusive</span></code></p></td>
<td><p>Job will not share nodes with other running jobs. You don’t need to specify memory as you will get all available on the node.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="to-distribute-your-job">
<h4>To distribute your job<a class="headerlink" href="#to-distribute-your-job" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--ntasks=&lt;num_procs&gt;</span></code></p></td>
<td><p>Number of (MPI) processes in total. Equals to the number of cores</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--mem-per-cpu=&lt;MB&gt;</span></code></p></td>
<td><p>Memory (RAM) per requested CPU core. Number followed by unit prefix, e.g. 2G</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="scalability">
<h3>Scalability<a class="headerlink" href="#scalability" title="Permalink to this headline">¶</a></h3>
<p>You should run a few tests to see what is the best fit between
minimizing runtime and maximizing your allocated cpu-quota. That is you
should not ask for more cpus for a job than you really can utilize
efficiently. Try to run your job on 1, 2, 4, 8, 16, etc., cores to see
when the runtime for your job starts tailing off. When you start to see
less than 30% improvement in runtime when doubling the cpu-counts you
should probably not go any further. Recommendations to a few of the most
used applications can be found in sw_guides.</p>
</div>
<div class="section" id="troubleshooting">
<h3>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h3>
<div class="section" id="srun-warning-can-t-honor-ntasks-per-node-set-to-x-which-doesn-t-match-the-requested-tasks-y-with-the-number-of-requested-nodes-y-ignoring-ntasks-per-node">
<h4>“srun: Warning: can’t honor –ntasks-per-node set to <em>X</em> which doesn’t match the requested tasks <em>Y</em> with the number of requested nodes <em>Y</em>. Ignoring –ntasks-per-node.”<a class="headerlink" href="#srun-warning-can-t-honor-ntasks-per-node-set-to-x-which-doesn-t-match-the-requested-tasks-y-with-the-number-of-requested-nodes-y-ignoring-ntasks-per-node" title="Permalink to this headline">¶</a></h4>
<p>This warning appears when using the <code class="docutils literal notranslate"><span class="pre">mpirun</span></code> command with Intel MPI and
specifying <code class="docutils literal notranslate"><span class="pre">--ntasks-per-node</span></code> for jobs in the <code class="docutils literal notranslate"><span class="pre">normal</span></code> partition on Fram.  As
far as we have seen, the job does <em>not</em> ignore the <code class="docutils literal notranslate"><span class="pre">--ntasks-per-node</span></code>, and
will run the specified number of processes per node.  You can test it with,
e.g., <code class="docutils literal notranslate"><span class="pre">mpirun</span> <span class="pre">hostname</span></code>.  Please let us know if you have an example where
<code class="docutils literal notranslate"><span class="pre">--ntasks-per-node</span></code> is <em>not</em> honored!</p>
<p>So, if you get this when using <code class="docutils literal notranslate"><span class="pre">mpirun</span></code> with Intel MPI, our recommendation is
currently that the warning can be ignored.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Sigma2/Metacenter

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>