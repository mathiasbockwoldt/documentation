

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Intel tuning tools &mdash; Sigma2/Metacenter documentation  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Sigma2/Metacenter documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">News</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://opslog.sigma2.no">Latest changes and events</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.sigma2.no/hardware-status">Hardware live status</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/support_line.html">Support line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/how_to_write_good_support_requests.html">Writing good support requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/qa-sessions.html">Open Question &amp; Answer Sessions for All Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/lost_forgotten_password.html">Lost or expiring password</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/project_leader_support.html">Project leader support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/advanced_user_support.html">Advanced User Support (AUS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/publish_research_data.html">Publish Research Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/course_resources.html">CRaaS - Course Resources as a Service</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../frontpage.html">The Norwegian Academic HPC Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/applying_account.html">How do I get an HPC account?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/applying_resources.html">Applying for computing and storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/training.html">Training material</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/create_ssh_keys.html">SSH</a></li>
</ul>
<p class="caption"><span class="caption-text">HPC Machines</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/hardware_overview.html">Overview over our machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/betzy.html">Betzy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/fram.html">Fram</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/saga.html">Saga</a></li>
<li class="toctree-l1"><a class="reference external" href="https://hpc-uit.readthedocs.io">Stallo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/migration2metacenter.html">Migration to a Metacenter HPC machine</a></li>
</ul>
<p class="caption"><span class="caption-text">Software</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../software/modulescheme.html">Software Module Scheme</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/installed_software.html">Installed Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/containers.html">Running Singularity and Docker containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/appguides.html">Application guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/userinstallsw.html">How can I, as a user, install software for myself or my project with EasyBuild?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/userinstallsw.html#how-can-i-as-user-install-python-packages">How can I as user install Python packages?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/licenses.html">Licenses and access policies</a></li>
</ul>
<p class="caption"><span class="caption-text">Jobs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../jobs/submitting.html">Submitting jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jobs/choosing_job_types.html">Job Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jobs/job_scripts.html">Job Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jobs/running-scientific-software.html">Running scientific software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jobs/monitoring.html">Monitoring jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jobs/choosing_memory_settings.html">How to choose the right amount of memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jobs/common_job_failures.html">Common job failures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jobs/performance.html">How to check the performance and scaling using Arm Performance Reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jobs/interactive_jobs.html">Interactive jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jobs/projects_accounting.html">Projects and accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jobs/network-access.html">No network access on compute nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jobs/dos_and_donts.html">Dos and Don’ts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jobs/guides.html">Guides</a></li>
</ul>
<p class="caption"><span class="caption-text">Files and Storage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/nird.html">NIRD - National Infrastructure for Research Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/clusters.html">Storage areas on HPC clusters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/backup.html">Backup on Betzy, Fram, Saga, and NIRD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/sharing_files.html">Data handling and storage policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/file_transfer.html">File transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/performance.html">Storage performance tuning</a></li>
</ul>
<p class="caption"><span class="caption-text">Code Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../building.html">Building scientific software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compilers.html">Compilers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance.html">Performance Analysis and Tuning</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Sigma2/Metacenter documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Intel tuning tools</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/UNINETTSigma2/documentation/blob/master/code_development/performance/intel_tuning.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="intel-tuning-tools">
<h1>Intel tuning tools<a class="headerlink" href="#intel-tuning-tools" title="Permalink to this headline">¶</a></h1>
<p>Intel provide a set of tuning tools that can be quite useful. The
following sections will give an overview of the tools and provide a
quick guide of the scope of the different tools and for which type of
tuning and what kind of programming model that are applicable for,
vectorization, threading, MPI.</p>
<p>Below is a list of tools that can be used to analyses the
application, starting from text analysis of the source code to massive
parallel MPI runs.</p>
<ul class="simple">
<li><p>Intel compiler, analysis of source code.</p></li>
<li><p>Intel XE-Advisor, analysis of Vectorization.</p></li>
<li><p>Intel XE-Inspector, analysis of threads and memory.</p></li>
<li><p>Intel VTune-Amplifier, analysis and profiling of complete program performance.</p></li>
<li><p>Intel MPI, profile the MPI calls.</p></li>
<li><p>Intel Trace Analyzer, analysis of MPI communication.</p></li>
</ul>
<p>The PRACE Best Practice Guide for the Intel processor Knights Landing:
[http://www.prace-ri.eu/best-practice-guide-knights-landing-january-2017/#tuning.section]
contain a nice review of the Intel tools and how to use them. Chapter 7 is about
tuning. Only chapters 1 and 2 are specific to the Knights Landing processor.</p>
<p>A short overview is given here with links to the relevant tools.
The Best Practice Guide provide an overview of the tools with a focus on
sampling. The actual usage of the different tools is only covered in depth
by the Intel documentation. Even with the documentation it can be hard to
start using the tools in an effective way. Attending Intel training is advised.</p>
<div class="section" id="intel-compiler-optimization-report">
<h2>Intel compiler - optimization report<a class="headerlink" href="#intel-compiler-optimization-report" title="Permalink to this headline">¶</a></h2>
<p>Compiler flags provide a mean of controlling the optimization done by
the compiler. There are a rich set of compiler flags and directives
that will guide the compiler’s optimization process. The details of
all these switches and flags can be found in the documentation, in
this guide we’ll provide a set of flags that normally gives acceptable
performance. It must be said that the defaults are set to request a
quite high level of optimization, and the default might not always be
the optimal set. Not all the aggressive optimizations are numerically
accurate, computer evaluation of an expression is as we all know quite
different from paper and pencil evaluation.</p>
<p>Please consult the BPG guide section about the Intel Compiler at:
[http://www.prace-ri.eu/best-practice-guide-knights-landing-january-2017/#id-1.8.3.5]</p>
<p>To use the Intel compiler one of the Intel compiler modules must be loaded,
an example is :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">load</span> <span class="n">intel</span><span class="o">/</span><span class="mi">2018</span><span class="n">b</span>
</pre></div>
</div>
</div>
<div class="section" id="intel-mpi-library">
<h2>Intel MPI library<a class="headerlink" href="#intel-mpi-library" title="Permalink to this headline">¶</a></h2>
<p>The MPI Perf Snapshot is a built in lightweight tool that will provide
some helpful information with little effort from the user. Link your
program with -profile=vt and simply issue the -mps flag to the mpirun
command (some environment need to be set up first, but this is quite
simple).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mpiifort</span> <span class="o">-</span><span class="n">o</span> <span class="o">./</span><span class="n">photo_tr</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span><span class="n">profile</span><span class="o">=</span><span class="n">vt</span> <span class="o">*.</span><span class="n">o</span>
<span class="n">mpirun</span> <span class="o">-</span><span class="n">mps</span> <span class="o">-</span><span class="n">np</span> <span class="mi">16</span> <span class="o">./</span><span class="n">photo_tr</span><span class="o">.</span><span class="n">x</span>
</pre></div>
</div>
<p>More information at the Best Practice Guide  :
[http://www.prace-ri.eu/best-practice-guide-knights-landing-january-2017/#id-1.8.3.6]</p>
</div>
<div class="section" id="intel-xe-advisor">
<h2>Intel XE-Advisor<a class="headerlink" href="#intel-xe-advisor" title="Permalink to this headline">¶</a></h2>
<p>Vectorization Advisor is an analysis tool that lets you identify if
loops utilize modern SIMD instructions or not, what prevents
vectorization, what is performance efficiency and how to increase
it. Vectorization Advisor shows compiler optimization reports in
user-friendly way, and extends them with multiple other metrics, like
loop trip counts, CPU time, memory access patterns and recommendations
for optimization.</p>
<p>More information at the Best Practice Guide  :
[http://www.prace-ri.eu/best-practice-guide-knights-landing-january-2017/#XE-Advisor]</p>
<p>To have access to the XE-Advisor load the designated module, an example is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">load</span> <span class="n">Advisor</span><span class="o">/</span><span class="mi">2018</span><span class="n">_update3</span>
</pre></div>
</div>
<p>Then launch the advisor in GUI or text version.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">advixe</span><span class="o">-</span><span class="n">gui</span> <span class="o">&amp;</span>
</pre></div>
</div>
<p>Using the GUI X11 version over long distances might be somewhat slow.</p>
</div>
<div class="section" id="intel-xe-inspector">
<h2>Intel XE-Inspector<a class="headerlink" href="#intel-xe-inspector" title="Permalink to this headline">¶</a></h2>
<p>Intel Inspector is a dynamic memory and threading error checking tool
for users developing serial and multithreaded applications.  The
tuning tool XE-advisor as tool tailored for threaded shared memory
applications (it can also collect performance data for hybrid MPI
jobs using a command line interface). It provide analysis of memory
and threading that might prove useful for tuning of any application.</p>
<p>More information at the Best Practice Guide  :
[http://www.prace-ri.eu/best-practice-guide-knights-landing-january-2017/#id-1.8.3.8]</p>
<p>To use the XE-Inspector us the Inspector module, like :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">load</span> <span class="n">Inspector</span><span class="o">/</span><span class="mi">2018</span><span class="n">_update3</span>
</pre></div>
</div>
<p>To launch the GUI:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inspxe</span><span class="o">-</span><span class="n">gui</span> <span class="o">&amp;</span>
</pre></div>
</div>
</div>
<div class="section" id="intel-vtune-amplifier">
<h2>Intel VTune Amplifier<a class="headerlink" href="#intel-vtune-amplifier" title="Permalink to this headline">¶</a></h2>
<p>Intel VTune Amplifier provides a rich set of performance insight into
CPU performance, threading performance and scaleability, bandwidth,
caching and much more. Originally a tool for processor development,
hence the strong focus on hardware counters.</p>
<p>Analysis is fast and easy because VTune Amplifier understands common
threading models and presents information at a higher level that is
easier to interpret. Use its powerful analysis to sort, filter and
visualize results on the timeline and on your source. However, the
sheer amount of information is sometimes overwhelming and in some
cases intimidating. To really start using VTune Amplifier some basic
training is suggested.</p>
<p>More information at the Best Practice Guide  :
[http://www.prace-ri.eu/best-practice-guide-knights-landing-january-2017/#id-1.8.3.9]</p>
<p>To get access to the Vtune Amplifier load the corresponding module, like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ml</span> <span class="n">load</span> <span class="n">VTune</span><span class="o">/</span><span class="mi">2018</span><span class="n">_update3</span>
</pre></div>
</div>
<p>For a run-through example see <span class="xref myst">a VTune case study.</span></p>
</div>
<div class="section" id="intel-trace-analyzer">
<h2>Intel Trace Analyzer<a class="headerlink" href="#intel-trace-analyzer" title="Permalink to this headline">¶</a></h2>
<p>Intel Trace Analyzer and Collector is a graphical tool for
understanding MPI application behavior, quickly finding bottlenecks,
improving correctness, and achieving high performance for parallel
cluster applications based on Intel architecture. Improve weak and
strong scaling for small and large applications with Intel Trace
Analyzer and Collector.  The collector tool is closely linked to the
MPI library and the profiler library must be compiled and linked with
the application. There is an option to run using a preloaded library,
but the optimal way is to link in the collector libraries at build
time.</p>
<p>More information at the Best Practice Guide  :
[http://www.prace-ri.eu/best-practice-guide-knights-landing-january-2017/#id-1.8.3.10]</p>
<p>To use Intel Trace Analyzer load the corresponding module, e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ml</span> <span class="n">load</span> <span class="n">itac</span><span class="o">/</span><span class="mf">2019.4</span><span class="o">.</span><span class="mi">036</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Sigma2/Metacenter

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>