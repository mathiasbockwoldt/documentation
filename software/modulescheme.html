

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Software Module Scheme &mdash; Sigma2/Metacenter documentation  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Installed Software" href="installed_software.html" />
    <link rel="prev" title="Migration to a Metacenter HPC machine" href="../hpc_machines/migration2metacenter.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Sigma2/Metacenter documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">News</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://opslog.sigma2.no">Latest changes and events</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.sigma2.no/hardware-status">Hardware live status</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/support_line.html">Support line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/how_to_write_good_support_requests.html">Writing good support requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/qa-sessions.html">Open Question &amp; Answer Sessions for All Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/lost_forgotten_password.html">Lost or expiring password</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/project_leader_support.html">Project leader support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/advanced_user_support.html">Advanced User Support (AUS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/publish_research_data.html">Publish Research Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/course_resources.html">CRaaS - Course Resources as a Service</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../frontpage.html">The Norwegian Academic HPC Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/applying_account.html">How do I get an HPC account?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/applying_resources.html">Applying for computing and storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/training.html">Training material</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/create_ssh_keys.html">SSH</a></li>
</ul>
<p class="caption"><span class="caption-text">HPC Machines</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hpc_machines/hardware_overview.html">Overview over our machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hpc_machines/betzy.html">Betzy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hpc_machines/fram.html">Fram</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hpc_machines/saga.html">Saga</a></li>
<li class="toctree-l1"><a class="reference external" href="https://hpc-uit.readthedocs.io">Stallo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hpc_machines/migration2metacenter.html">Migration to a Metacenter HPC machine</a></li>
</ul>
<p class="caption"><span class="caption-text">Software</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Software Module Scheme</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#which-modules-are-currently-loaded">Which modules are currently loaded?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#which-modules-are-available">Which modules are available?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-load-a-module">How to load a module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-unload-a-module">How to unload a module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-switch-to-a-different-version-of-a-module">How to switch to a different version of a module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-save-and-restore-your-module-environment">How to save and restore your module environment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installed_software.html">Installed Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="containers.html">Running Singularity and Docker containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="appguides.html">Application guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="userinstallsw.html">How can I, as a user, install software for myself or my project with EasyBuild?</a></li>
<li class="toctree-l1"><a class="reference internal" href="userinstallsw.html#how-can-i-as-user-install-python-packages">How can I as user install Python packages?</a></li>
<li class="toctree-l1"><a class="reference internal" href="licenses.html">Licenses and access policies</a></li>
</ul>
<p class="caption"><span class="caption-text">Jobs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../jobs/submitting.html">Submitting jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jobs/choosing_job_types.html">Job Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jobs/job_scripts.html">Job Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jobs/running-scientific-software.html">Running scientific software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jobs/monitoring.html">Monitoring jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jobs/choosing_memory_settings.html">How to choose the right amount of memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jobs/common_job_failures.html">Common job failures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jobs/performance.html">How to check the performance and scaling using Arm Performance Reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jobs/interactive_jobs.html">Interactive jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jobs/projects_accounting.html">Projects and accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jobs/network-access.html">No network access on compute nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jobs/dos_and_donts.html">Dos and Don’ts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jobs/guides.html">Guides</a></li>
</ul>
<p class="caption"><span class="caption-text">Files and Storage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../files_storage/nird.html">NIRD - National Infrastructure for Research Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../files_storage/clusters.html">Storage areas on HPC clusters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../files_storage/backup.html">Backup on Betzy, Fram, Saga, and NIRD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../files_storage/sharing_files.html">Data handling and storage policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../files_storage/file_transfer.html">File transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../files_storage/performance.html">Storage performance tuning</a></li>
</ul>
<p class="caption"><span class="caption-text">Code Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../code_development/building.html">Building scientific software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code_development/compilers.html">Compilers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code_development/performance.html">Performance Analysis and Tuning</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Sigma2/Metacenter documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Software Module Scheme</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/UNINETTSigma2/documentation/blob/master/software/modulescheme.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="software-module-scheme">
<h1>Software Module Scheme<a class="headerlink" href="#software-module-scheme" title="Permalink to this headline">¶</a></h1>
<p>Since a HPC cluster is shared among many users, and also holds a significant size in contrast to most desktop compute machinery around, the amount of installed software spans many applications in many different versions and quite a few of them are installed typically non-standard places for easier maintenance (for admin crew), practical and security reasons. It is not possible (nor desirable) to use them all at the same time, since different versions of the same application may conflict with each other. Therefore, it is practical to provide the production environment for a given application outside of the application itself. This is done using a set of instructions and variable settings that are specific for the given application called an application module. This also simplifies control of which application versions are available in a specific session.</p>
<p>The main command for using this system is the module command. You can find a list of all its options by typing:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module --help
</pre></div>
</div>
<p>We use the lmod module system; for more info see <a class="reference external" href="https://lmod.readthedocs.io/en/latest/">https://lmod.readthedocs.io/en/latest/</a> in the Metacenter currently. Below we listed the most commonly used options, but also feel free to ivestigate options in this toolset more thoroughly on developers site.</p>
<div class="section" id="which-modules-are-currently-loaded">
<h2>Which modules are currently loaded?<a class="headerlink" href="#which-modules-are-currently-loaded" title="Permalink to this headline">¶</a></h2>
<p>To see the modules currently active in your session, use the command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module list
</pre></div>
</div>
</div>
<div class="section" id="which-modules-are-available">
<h2>Which modules are available?<a class="headerlink" href="#which-modules-are-available" title="Permalink to this headline">¶</a></h2>
<p>In order to see a complete list of available modules, issue the command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module avail
</pre></div>
</div>
<p>The resulting list will contain module names conforming to the following pattern:</p>
<ul class="simple">
<li><p>name of the module</p></li>
<li><p>/</p></li>
<li><p>version</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">avail</span></code> option can also be used to search for specific software, e.g.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module avail netcdf
</pre></div>
</div>
<p>will list all modules matching the string “netcdf” (case insensitive).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some modules are mainly intended as dependencies for others, and are typically
not very useful by themselves. Such modules are made hidden to the <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">avail</span></code>
command to avoid cluttering the listed output. However, if you are compiling
your own code some of these might still be useful, and you can still load them.
To include hidden modules you can add the <code class="docutils literal notranslate"><span class="pre">--show-hidden</span></code> option to the <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">avail</span></code> search.</p>
</div>
</div>
<div class="section" id="how-to-load-a-module">
<h2>How to load a module<a class="headerlink" href="#how-to-load-a-module" title="Permalink to this headline">¶</a></h2>
<p>In order to make, for instance, the NetCDF library available issue the command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module load netCDF/4.4.1.1-intel-2018a-HDF5-1.8.19
</pre></div>
</div>
<p>Note that we currently do <strong>not have</strong> default modules on Metacenter machines, so you need to write full module name when loading!</p>
</div>
<div class="section" id="how-to-unload-a-module">
<h2>How to unload a module<a class="headerlink" href="#how-to-unload-a-module" title="Permalink to this headline">¶</a></h2>
<p>Keeping with the above example, use the following command to unload the NetCDF module again:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module unload netCDF
</pre></div>
</div>
<p>Note that this will only unload the loaded module with “netCDF/”-namebase, in this case the module named netCDF/4.4.1.1-intel-2018a-HDF5-1.8.19. To unload everything you can type</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module purge
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">purge</span></code> command will inform you that some modules (like <code class="docutils literal notranslate"><span class="pre">StdEnv</span></code>)
were not unloaded. Such modules are made “sticky” because they are necessary
for the system to work, and they should not be <code class="docutils literal notranslate"><span class="pre">--force</span></code> purged as the message
suggest. If this warning message annoys you, you can suppress it with the <code class="docutils literal notranslate"><span class="pre">--quiet</span></code>
option instead.</p>
</div>
</div>
<div class="section" id="how-to-switch-to-a-different-version-of-a-module">
<h2>How to switch to a different version of a module<a class="headerlink" href="#how-to-switch-to-a-different-version-of-a-module" title="Permalink to this headline">¶</a></h2>
<p>Switching to another version is similar to loading a specific version. As an example, if you want to switch from the current loaded netCDF to an older one; netCDF/4.4.0-intel-2016a:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module switch netCDF/4.4.1.1-intel-2018a-HDF5-1.8.19 netCDF/4.4.0-intel-2016a
</pre></div>
</div>
<p>This, more compact syntax will fortunately also work:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module switch netCDF netCDF/4.4.0-intel-2016a
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We are using self-contained modules in the Metacenter, meaning that a given module
loads all dependecies necessary. This is in slight contrast to old policies on for
instance Stallo, and also means that you might mess up quite significantly if you
load extra modules in job scripts after loading the main software module.
We recommend doing <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">list</span></code> after every load (to inspect) and unloading any
conflicting packages, if possible. It is also good practice to start all job scripts
with a <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">purge</span></code>, before loading all necessary modules for the calculation.</p>
</div>
</div>
<div class="section" id="how-to-save-and-restore-your-module-environment">
<h2>How to save and restore your module environment<a class="headerlink" href="#how-to-save-and-restore-your-module-environment" title="Permalink to this headline">¶</a></h2>
<p>When you have loaded all necessary modules for a particular purpose and made sure that
your environment is working correctly, you can save it with</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module save &lt;name-of-env&gt;
</pre></div>
</div>
<p>and later restore it with</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module restore &lt;name-of-env&gt;
</pre></div>
</div>
<p>To list all your saved environments</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module savelist
</pre></div>
</div>
<p>This feature is particularly convenient if you spend a lot of time compiling/debugging
in interactive sessions. For production calculations using job scripts it is still
recommended to load each module explicitly for clarity.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="installed_software.html" class="btn btn-neutral float-right" title="Installed Software" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../hpc_machines/migration2metacenter.html" class="btn btn-neutral float-left" title="Migration to a Metacenter HPC machine" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Sigma2/Metacenter

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>